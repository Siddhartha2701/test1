<div class="mt-4 mb-4 ">
    <div class="main">
        <div class="d-flex justify-content-center">
            <form class="w-75" [formGroup]="searchFrm" (ngSubmit)="getTemplate()">
                <div class="input-group">
                    <!-- <input type="text" name="UserName" id="uName" formControlName="search" placeholder="User Name"
                        class="form-control" [matAutocomplete]="auto" (input)="InputField(searchFrm.value)"> -->
                    <div class=" srch ">
                        <mat-form-field class="example-full-width" appearance="outline">
                            <mat-label>User Name</mat-label>
                            <input matInput placeholder="Enter User Name" class="inp" name="UserName" id="uName"
                                formControlName="search" [matAutocomplete]="auto" (input)="InputField(searchFrm.value)">
                        </mat-form-field>
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option *ngFor="let option of options" [value]="option.user_name">
                                {{option.user_name}}
                            </mat-option>
                        </mat-autocomplete>
                    </div>
                    <div class="input-group-append pt-1  ml-2">
                        <button type="submit" mat-raised-button color="primary" [disabled]="!searchFrm.valid" class="button"><strong>Get
                            Templates</strong></button>
                        <!-- <button class="btn btn-outline-primary" (click)="getTemplate()">Get Templates</button> -->
                    </div>
                </div>
            </form>
        </div>
        <br>
        <div class="card ml-auto mr-auto p-3" style="border-radius: 15px; box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;">
            <div>
                <form action="#" [formGroup]="templateFrm" class="example-form">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <mat-form-field class="example-full-width" appearance="outline">
                                <mat-label>User Name</mat-label>
                                <input matInput placeholder="User Name" class="inp" formControlName="pUN">
                                <mat-error *ngIf="templateFrm.controls['pUN'].hasError('required')">
                                    <strong>User Name</strong> is Required.
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <mat-form-field class="example-full-width" appearance="outline">
                                <mat-label>Template Name</mat-label>
                                <input matInput placeholder="Template Name" class="inp" formControlName="tname">
                                <mat-error *ngIf="templateFrm.controls['tname'].hasError('required')">
                                    <strong>Template</strong> is Required.
                                </mat-error>
                                <mat-error *ngIf="templateFrm.controls['tname'].hasError('pattern')">
                                    Template Name Contains only <strong>[a-zA-Z0-9_\-]+</strong>
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="mt-3">
                        <mat-form-field class="example-full-width" appearance="outline">
                            <mat-label>Description</mat-label>
                            <textarea matInput placeholder="Description..." class="inp"
                                formControlName="pDesc"></textarea>
                                <mat-error *ngIf="templateFrm.controls['pDesc'].hasError('required')">
                                    <strong>Template Description</strong> is Required.
                                </mat-error>
                        </mat-form-field>
                    </div>
                    <div class="d-flex justify-content-center">
                        <button mat-raised-button color="primary" [disabled]="!templateFrm.valid" class="button" style="font-size: 20px;"
                            (click)="saveTemplate()"><strong>Save Template</strong></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="border p-3 m-1 table-responsive-sm">
        <table class="table table-hover ">
            <thead class="bg-light" style="font-size: 20px; letter-spacing: 0.3mm;">
                <tr>
                    <th>ID</th>
                    <th>Template</th>
                    <th>Description</th>
                    <th>Variable(s)</th>
                    <th>Date</th>
                    <th>Remove</th>
                </tr>
            </thead>
            <tbody *ngIf="!datashow" style="font-size: 20px;">
                <tr>
                    <td colspan="6">No Data Available</td>
                </tr>
            </tbody>
            <tbody style="font-size: 20px; font-weight: 500;" *ngIf="datashow">
                <tr *ngFor="let item of data;let i = index">
                    <td>{{i+1}}</td>
                    <td>{{item.template_name}}</td>
                    <td>{{item.template_description}}</td>
                    <td>{{item.template_variables}}</td>
                    <td>{{item.insert_timestamp | date : 'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td class="d-flex justify-content-center " (click)="removePermision(i)" style="cursor: pointer;">
                        <lucide-icon name="trash-2" data-toggle="modal" data-target="#myModal" [size]="28"
                            color="#ff0000" [strokeWidth]="3" [absoluteStrokeWidth]="true"></lucide-icon>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div>
    <!-- The Modal -->
    <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">

                <!-- Modal Header -->
                <!-- <div class="modal-header">
                        <h4 class="modal-title">Modal Heading</h4>
                    </div> -->

                <!-- Modal body -->
                <div class="modal-body">
                    <div>
                        <h1>Are You sure you want to remove this {{name}}?</h1>
                        <div class="d-flex justify-content-end">
                            <button type="button" class="btn btn-outline-danger" (click)="delete()">Delete</button>
                            <button type="button" id="cancel" class="btn btn-outline-secondary ml-2"
                                data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>

                <!-- Modal footer -->
                <!-- <div class="modal-footer">
            </div> -->

            </div>
        </div>
    </div>
</div>